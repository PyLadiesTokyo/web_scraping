## Webスクレイピングとは
Webスクレイピング（Web scraping）とは、Webページから必要なデータを抽出することです。
よく混同されがちな言葉にクローリング（crawling）がありますが，クローリングはリンクを辿ってWebページを収集することで，スクレイピングは収集したWebページから必要な情報を抜き出すことを指します。（両者を区別せず使うことも多いです）

## Webスクレイピングが違法になるケース
Webスクレイピングは大変便利な技術ですが、スクレイピングしたデータの使用目的やスクレイピング方法によっては，情報公開元に迷惑をかけたり，場合によっては法に触れることもあります。
- サーバーに負荷をかけてしまった場合 (刑法233条偽計業務妨害罪、同234条電子計算機損壊等業務妨害罪）
    - 過度にアクセスすることによってそのWebサイトが重くて閲覧不可能になった等、偽計業務妨害罪や電子計算機損壊等業務妨害罪にあたる可能性があります。 
      - 岡崎市中央図書館事件
        - 2010年3月、岡崎市立図書館のウェブサイトに対してWebスクレイピング行っていた男性が、同年5月25日高頻度のリクエストを故意に送りつけたとして偽計業務妨害の容疑で逮捕された。(実際には1秒1アクセス程度で、サーバーに対して攻撃するような高負荷を与えるものではなかったが、図書館のシステムが旧式であったこともあり、閲覧障害が発生した)
- WebスクレイピングするWebサイトの利用規約に違反する場合
    - 利用規約でWebスクレイピング・クローリングを禁止されているサイトに、その利用規約に同意しているにも関わらず、それを無視してスクレイピング等を行った場合には、利用規約違反となり、民事上の責任として、債務不履行責任や不法行為責任を負う可能性があります。
    - 会員登録などせずともなくだれでも閲覧可能なウェブサイトについては、利用規約に同意せずWebスクレイピングを実施すれば、利用規約違反の問題にははなりませんが、サイト側でAPIを用意している場合などは指定の方式を遵守することが望ましいです。
- 著作権を無視した利用、複製等を行ってしまった場合 （著作権法21条など）
    - Web上にある著作物を利用するためには、原則として著作権者の同意を得なければなりません。著作物の利用には、データをコピーして保存する行為も含まれますので、WebスクレイピングによってWeb上のデータを収集して保存する場合も、著作権者の同意を得なければならないのが原則です。

## Webスクレイピングを行う上での注意点
- APIが提供されている場合はそちらを利用する
- Webサイトに負荷をかけないようにアクセスする
- サイトの利用規約を確認する
  - [Amazon 利用規約](https://www.amazon.co.jp/gp/help/customer/display.html?nodeId=GLSBYFE9MGKKQXXM)
    - 利用規約により無許可でのスクレイピングを禁止
  - [Twitter サービス利用規約](https://twitter.com/ja/tos/previous/version_7)
    - 事前承諾のないクローリング（スクレイピング）は禁止
- robots.txtを確認する
  - robots.txtファイルは、ドメインのルートディレクトリに設置されています
    - [Facebook - robots.txt](https://www.facebook.com/robots.txt)
    - [Github - robots.txt](https://github.com/robots.txt)
    - [Twitter - robots.txt](https://twitter.com/robots.txt) 

## robots.txtとは

https://marketingnative.jp/how-to-write-robotstxt-file/

- robots.txtは、クローラーによる巡回や、検索エンジンに対してURLのアクセス可否を記載しています。
- robosS.txt の例

  ```
  User-Agent:*
  Disallow:/example/
  Allow: /example/item/
 
  Sitemap:http://aaaaaa.jp/sitemap
  ```
  - 「User-agent」で指定したクローラーについて、「Disallow」「Allow」でルールが設定されています。
    - たとえば、Googlebotと指定した場合、GoogleのWebクロールを制御することになります。「*」はすべてのクローラー、の意味になります。

    - https://developer.mozilla.org/ja/docs/Web/HTTP/Headers/User-Agent
    - Pythonの requests などでも、User Agentを指定することができます。

  - 「Disallow」は、クローラーのアクセスを制御するファイルを指定するものです。Disallowで指定されたファイルやディレクトリはアクセスが禁止されています。
    - 以下のように記載されている場合は、このディレクトリ配下はアクセス禁止です
      ```
      Disallow:/example/
      ```
  - 「Allow」は、クローラーのアクセスを許可するファイルを指定するものです。Allow:はDisallow:よりも優先されます。通常、Disallow:で拒否したいディレクトリ等を指定するのですが、一部許可したいものを指定するのに使います。上記の記述では、/example/ディレクトの中身とそれ以降のディレクトリへのクローラーのアクセスを禁じていますが、/item/へのアクセスは許可されています。
  - 「Sitemap」は、sitemap.xmlの場所をクローラーに伝えるものです。巡回してほしいURLをクローラーに伝えるものです。

こちらも参考に: [Webスクレイピングの注意事項一覧](https://qiita.com/nezuq/items/c5e827e1827e7cb29011)

上記のことを守って誰にも迷惑をかけないWebスクレイピングを心がけましょう!!
